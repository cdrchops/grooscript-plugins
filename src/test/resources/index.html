<html>
<head>
    <title>Trying to use web components</title>
    <style type="text/css">
        body {
            background-color: darkseagreen;
        }
    </style>
    <script src="CustomElements.min.js"></script>
    <script src="grooscript-grails.js"></script>
    <script src="Counter.js"></script>
    <script>
	var MyCounter = Object.create(HTMLElement.prototype);
        MyCounter.createdCallback = function() {
            var shadow = this.createShadowRoot();
            var content = this.textContent;
            var attrs = this.attributes; //name and value
            var map = {shadowRoot: shadow, content: content};
            if (attrs && attrs.length > 0) {
                for (var i = 0; i < attrs.length; i++) {
                    var element = attrs[i];
                    map[element.name] = element.value;
		}
            }
	    GrooscriptGrails.register(Counter(map)).draw();
        };
        document.registerElement('my-counter', {prototype: MyCounter});
    </script>
</head>
<body>

<my-counter value="2">things</my-counter>
<my-counter></my-counter>

</body>
</html>
